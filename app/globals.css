@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;
}

/* Global hero sizing so other elements (main) can read it */
:root {
  --hero-height: 16rem; /* slightly taller than h-48 (was 12rem) */
  --hero-gap: 1rem; /* visible gap between hero and content (reduced) */
}

/* Navigation height (header). Tune if your header height differs. */
:root {
  --nav-height: 3.5rem; /* slightly thicker navbar as requested */
}

body {
  @apply bg-background text-slate-900 antialiased;
  margin: 0; /* ensure no browser default margin pushes layout */
}

/* Gradient variables for dynamic accent (teal → purple) */
:root {
  --g1: #14b8a6; /* teal */
  --g2: #8b5cf6; /* purple */
  --accent-gradient: linear-gradient(90deg, var(--g1), var(--g2));
}

/* Color variables for accent-focused components */
:root {
  --accent: #14b8a6; /* teal */
  --accent-light: #7dd3c6;
  --accent-50: #e6fffb;
}

main {
  /* allow flex children to size correctly when body is a column flex container
     (we set body to `min-h-screen flex flex-col` in layout.tsx and make main flex-1) */
  min-height: 0;
}

.section {
  @apply max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8;
}

.section-title {
  @apply text-2xl sm:text-3xl font-semibold mb-4;
}

.section-subtitle {
  @apply text-sm text-gray-400 mb-8 max-w-2xl;
}

.card {
  @apply rounded-2xl bg-surface p-5 shadow-sm text-slate-800;
  /* create a gradient border using layered backgrounds
     - inner layer: white (card body)
     - outer layer: gradient (used as border) */
  border: 3px solid transparent;
  /* use a slightly darker very light gray for the card body so it stands
    out a bit more from the white page background */
  /* layered backgrounds: base card body, accent gradient border layer */
  background-image: linear-gradient(#f1f5f9, #f1f5f9), var(--accent-gradient);
  /* slightly stronger gray shadow for clearer separation (tuned down slightly) */
  box-shadow: 0 16px 48px rgba(2,6,23,0.10);
  background-origin: padding-box, border-box;
  background-clip: padding-box, border-box;
}

/* animated gradient movement on hover: the second background layer (accent) will move */
.card {
  /* make second layer larger so movement is more visible when it moves */
  /* larger size -> more color shift visible as the background-position moves */
  background-size: 100% 100%, 300% 300%;
  /* start the accent gradient at the top center so rotation feels natural */
  background-position: center, 50% 0%;
}

.card:hover {
  /* rotate the accent gradient around the card more quickly on hover only.
     This affects only the second background layer's position (the gradient border).
     Keep the rest of the card visuals unchanged. */
  animation: card-gradient-move 1.8s linear infinite;
}

@keyframes card-gradient-move {
  /* simpler 4-step path produces a clearer 'rotation' around the card.
     All moves target only the second background layer (the gradient). */
  0%   { background-position: center, 50% 0%; }
  25%  { background-position: center, 100% 50%; }
  50%  { background-position: center, 50% 100%; }
  75%  { background-position: center, 0% 50%; }
 100%  { background-position: center, 50% 0%; }
}

/* Respect users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  .card:hover {
    animation: none !important;
    transition: box-shadow 220ms ease, transform 220ms ease;
  }
}

/* Enable smooth GPU-accelerated transform transitions for tilt effect */
.card {
  transform-style: preserve-3d;
  transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease;
}

/* Explicit fallbacks (ensure immediate bright background even if tailwind output is stale) */
body {
  background-color: #ffffff;
  color: #0f172a;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.card {
  /* subtle light-gray card background so cards read as elevated panels */
  background-color: #f1f5f9;
  /* more pronounced gray shadow as the default (tuned down slightly) */
  box-shadow: 0 16px 48px rgba(2,6,23,0.10);
  color: #0f172a;
}

.section-subtitle {
  color: #64748b; /* slate-500 fallback */
}

header.site-nav {
  /* semi-transparent accent gradient so hero peeks through; keep high contrast */
  background: linear-gradient(90deg, rgba(20,184,166,0.85), rgba(139,92,246,0.85));
  color: white;
  border-bottom: 1px solid rgba(255,255,255,0.12);
  /* subtle glass effect where supported */
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  /* small subtle shadow to separate nav from content when needed */
  box-shadow: 0 2px 8px rgba(2,6,23,0.04);
}

/* ensure links in the nav remain highly legible */
header.site-nav a,
header.site-nav .nav-link {
  color: #ffffff;
  text-decoration: none;
}
header.site-nav a:hover,
header.site-nav .nav-link:hover,
header.site-nav a:focus,
header.site-nav .nav-link:focus {
  text-decoration: underline;
}

/* faint text-shadow for nav items to improve contrast on busy hero images */
header.site-nav a,
header.site-nav .nav-link,
header.site-nav .brand {
  text-shadow: 0 1px 2px rgba(2,6,23,0.45);
}

/* Make the brand highly legible over the semi-transparent nav */
header.site-nav .brand {
  color: #ffffff;
  font-weight: 600;
  letter-spacing: -0.01em;
}

/* Small configurable gap so part of the hero remains visible before scrolling
   (set to 0 so the hero meets the content area unless you opt for visual gap) */
:root {
  --hero-gap: 0rem; /* adjust as needed; 0 prevents a white gap between hero and content */
  --content-offset: 3rem; /* additional downward offset for main content */
}

.hero-banner {
  /* Fixed hero so it remains visually continuous under the semi-opaque nav.
     - position: fixed keeps the banner locked to the viewport top so it
       doesn't 'stop' when the header becomes sticky.
     - keep a low z-index so the nav (z-index:60) and content area (z-index:20)
       can layer above as designed: nav above hero, content above hero. */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  /* allow the image to extend below the hero container so the bottom is not
     cut off; the page content (z-index:20) will sit above any excess image */
  overflow: visible;
  width: 100%;
  height: var(--hero-height);
  z-index: 10; /* beneath header, under content */
}

.hero-banner img {
  /* Position absolute so the image top lines up with the page top and the
     image may extend downward beyond the hero container. Use min-height to
     ensure the hero area is covered while allowing overflow to be hidden by
     content above it. */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: auto;
  min-height: var(--hero-height);
  object-fit: cover;
  /* default to showing the bottom of the image so the lower part isn't cut off */
  object-position: var(--hero-image-position, center 100%);
  z-index: 0;
  /* slight upward offset so the image extends higher (top may be cut off)
     while leaving layout and content unchanged. Default -10rem as requested. */
  transform: translateY(var(--hero-banner-offset, -3rem));
  will-change: transform;
}

.hero-overlay {
  z-index: 5; /* sits above the image but below content and nav */
}

.hero-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  background: linear-gradient(to bottom, rgba(20,184,166,0.18), rgba(139,92,246,0.06));
}

.hero-overlay h1,
.hero-overlay p {
  text-shadow: 0 1px 6px rgba(2,6,23,0.6);
}

/* Content area immediately below the hero
   - ensures readable text on white background
   - provides a subtle rounded top and shadow for separation */
.content-area {
  background-color: #ffffff;
  /* keep content visually below the hero */
  margin-top: 0;
  box-shadow: 0 -8px 30px rgba(2,6,23,0.06);
  border-top-left-radius: 1rem;
  border-top-right-radius: 1rem;
  position: relative;
  z-index: 20; /* sit above the fixed hero */
}

/* For very small screens reduce the radius to keep it subtle */
@media (max-width: 640px) {
  .content-area {
    border-top-left-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
  }
}

/* responsive hero height to match Tailwind h-48 / h-64 / h-72 */
@media (min-width: 640px) {
  :root {
    --hero-height: 17rem; /* slightly taller than sm h-64 (was 16rem) */
  }
}

@media (min-width: 768px) {
  :root {
    --hero-height: 25rem; /* slightly taller than md h-72 (was 18rem) */
  }
}

/* Ensure header (NavBar) stays above the hero and content */
header.site-nav {
  /* keep the nav sticky at the top and above the hero */
  position: sticky;
  top: 0;
  z-index: 60;
  /* only set the visual height here so internal layout (buttons) is unchanged */
  height: var(--nav-height);
}

/* Ensure the immediate inner container stretches to the header height so its
   `items-center` utility (applied in the component) vertically centers the
   brand and nav links without changing horizontal layout. This avoids touching
   the inner container's padding or flex behavior. */
header.site-nav > div {
  height: 100%;
}

/* Ensure the page content initially sits below the fixed hero */
main {
  /* Keep the main content positioned below the hero. Add an extra offset
     so content starts further down (useful to expose more of the banner).
     Controlled by --content-offset (default 5rem). */
  padding-top: calc(var(--hero-height) + var(--content-offset));
}

/* Projects expanding-card animation styles */
.projects-faded > *:not(.expanding-overlay) {
  opacity: 0.08;
  transform: scale(0.98);
  transition: opacity 320ms ease, transform 320ms ease;
}

.card-dim {
  opacity: 0.08;
  transform: scale(0.98);
}

.projects-overlay-container {
  position: fixed;
  inset: 0;
  /* allow the container to receive clicks so we can detect outside clicks;
     the expanding overlay still accepts pointer events itself */
  pointer-events: auto;
  /* subtle backdrop to indicate modal state and provide a click target */
  background: rgba(2,6,23,0.18);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px; /* keep some space on small viewports */
  z-index: 99990; /* ensure overlay container sits above page content */
}


.expanding-overlay {
  /* Use absolute positioning inside the fixed full-viewport container so
     JS can set left/top/width/height using viewport coordinates. This keeps
     the overlay visually detached from page layout and prevents transforms
     on parent containers from shifting it. */
  position: absolute;
  left: 0;
  top: 0;
  background: white;
  box-shadow: 0 10px 40px rgba(2,6,23,0.12);
  border-radius: 0.75rem;
  overflow: hidden;
  z-index: 99999;
  pointer-events: auto;
  /* allow JS to animate geometry (left/top/width/height) and border-radius */
  will-change: left, top, width, height, border-radius, opacity;
  /* geometry transition for the morph animation */
  transition: left 420ms cubic-bezier(.2,.9,.2,1),
              top 420ms cubic-bezier(.2,.9,.2,1),
              width 420ms cubic-bezier(.2,.9,.2,1),
              height 420ms cubic-bezier(.2,.9,.2,1),
              border-radius 320ms ease,
              opacity 240ms ease;
  /* do not force an initial transform scale here — JS will control visual
     presentation so the starting geometry matches the card position exactly */
  opacity: 1;
  display: block;
  max-width: 1000px;
  max-height: calc(100vh - 120px);
}

.expanding-overlay .overlay-inner {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* ensure smooth content fade inside overlay */
.expanding-overlay .overlay-inner > * {
  transition: opacity 240ms ease;
}

/* Footer styles */
.site-footer {
  /* use the accent gradient and ensure good contrast */
  background: var(--accent-gradient);
  color: white;
  margin-top: 3rem;
  border-top: 1px solid rgba(255,255,255,0.06);
}
.site-footer .footer-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  /* constrain footer content width so the footer reads narrower without moving buttons */
  max-width: 40rem !important;
  margin: 0 auto;
  /* reduce vertical padding to make the footer shorter while preserving horizontal padding */
  padding-top: 0.75rem !important;
  padding-bottom: 0.75rem !important;
}

.site-footer .footer-inner .text-sm {
  color: rgba(255,255,255,0.92);
  /* slightly larger and bolder for the footer name */
  font-size: 1rem;
  font-weight: 600;
}

.site-footer a.footer-link {
  color: rgba(255,255,255,0.88);
  text-decoration: none;
  font-size: 0.875rem; /* match text-sm */
}
.site-footer a.footer-link:hover,
.site-footer a.footer-link:focus {
  color: #ffffff;
  text-decoration: underline;
}

@media (max-width: 640px) {
  .site-footer .footer-inner {
    flex-direction: column;
    align-items: flex-start;
  }
}

/* headshot wrapper to provide a visible border with the accent gradient */
.headshot-wrapper {
  padding: 4px; /* thickness of the gradient border */
  background: linear-gradient(90deg, var(--g1), var(--g2));
  display: inline-block;
}

/* footer icon links */
.footer-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  color: rgba(255,255,255,0.88);
  text-decoration: none;
}
.footer-icon svg {
  width: 24px;
  height: 24px;
  display: block;
}
.footer-icon:hover,
.footer-icon:focus {
  color: #ffffff;
}
.headshot-img {
  display: block;
  /* keep image sizing controlled by utility classes on the element */
  border-radius: 9999px;
  background-clip: padding-box;
}

/* Constrain embedded PDF previews so only the first page is visible (clipped). */
/* PDF thumbnails removed; diplomas are now downloadable links only. */

/* Parallax container - used by client HeroParallax component */
.parallax-container {
  will-change: transform;
  /* keep transform origin centered so motion looks natural */
  transform-origin: center top;
}

/* move the hero text slightly lower inside the parallax container
   without affecting the parallax transform (which modifies the container)
   - use CSS variable --hero-text-offset, default 2rem */
.parallax-container .hero-text {
  margin-top: var(--hero-text-offset, 8rem);
}

@media (max-width: 640px) {
  .parallax-container .hero-text {
    margin-top: var(--hero-text-offset-mobile, 1.25rem);
  }
}

/* Fade-in staggered animations for hero title/subtitle */
@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateY(6px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in {
  opacity: 0;
  animation-name: fadeInUp;
  /* slower: make the entrance noticeably more deliberate */
  /* longer duration for a full page load */
  animation-duration: 1000ms;
  /* small initial delay for full loads */
  animation-delay: 2000ms;
  animation-timing-function: cubic-bezier(.2,.9,.2,1);
  animation-fill-mode: forwards;
  will-change: transform, opacity;
}

@media (prefers-reduced-motion: reduce) {
  .fade-in {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}

/* quick fade-out used when navigating away; keep it short and smooth */
@keyframes fadeOutQuick {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(4px); }
}

.fade-out {
  animation-name: fadeOutQuick;
  animation-duration: 160ms;
  animation-timing-function: cubic-bezier(.2,.9,.2,1);
  animation-fill-mode: forwards;
  will-change: opacity, transform;
}

/* ScrollReveal utility classes applied via JS for out-of-viewport content */
.sr-hidden {
  opacity: 0;
  transform: translateY(6px);
  transition: opacity 680ms cubic-bezier(.2,.9,.2,1), transform 680ms cubic-bezier(.2,.9,.2,1);
  will-change: opacity, transform;
}

.sr-visible {
  opacity: 1;
  transform: translateY(0);
}

@media (prefers-reduced-motion: reduce) {
  .sr-hidden, .sr-visible {
    transition: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}
